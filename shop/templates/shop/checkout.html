{% extends 'shop/base.html' %}
{% load static %}

{% block content %}

<!-- Page Header -->
<div class="container-fluid page-header py-5">
    <h1 class="text-center text-white display-6">Checkout</h1>
    <ol class="breadcrumb justify-content-center mb-0">
        <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
        <li class="breadcrumb-item"><a href="{% url 'cart' %}">Cart</a></li>
        <li class="breadcrumb-item active text-white">Checkout</li>
    </ol>
</div>

<div class="container-fluid py-5">
<div class="container py-5">

<form method="POST">
{% csrf_token %}

<div class="row g-5">

<!-- ================= LEFT SIDE BILLING ================= -->
<div class="col-lg-7">

<h4 class="mb-4">Billing Details</h4>

<div class="row">
    <div class="col-md-6">
        <label class="form-label">First Name *</label>
        <input type="text" name="first_name" class="form-control" required>
    </div>
    <div class="col-md-6">
        <label class="form-label">Last Name *</label>
        <input type="text" name="last_name" class="form-control" required>
    </div>
</div>

<div class="mt-3">
    <label class="form-label">Company Name</label>
    <input type="text" name="company" class="form-control">
</div>

<div class="mt-3">
    <label class="form-label">Address *</label>
    <input type="text" name="address" class="form-control" required>
</div>

<div class="row mt-3">
    <div class="col-md-6">
        <label class="form-label">City *</label>
        <input type="text" name="city" class="form-control" required>
    </div>
    <div class="col-md-6">
        <label class="form-label">Country *</label>
        <input type="text" name="country" class="form-control" required>
    </div>
</div>

<div class="row mt-3">
    <div class="col-md-6">
        <label class="form-label">Zipcode *</label>
        <input type="text" name="zipcode" class="form-control" required>
    </div>
    <div class="col-md-6">
        <label class="form-label">Mobile *</label>
        <input type="tel" name="mobile" class="form-control" required>
    </div>
</div>

<div class="mt-3">
    <label class="form-label">Email *</label>
    <input type="email" name="email" class="form-control" required>
</div>

<div class="mt-3">
    <label class="form-label">Order Notes</label>
    <textarea name="order_note" class="form-control" rows="4"></textarea>
</div>

</div>

<!-- ================= RIGHT SIDE ORDER SUMMARY ================= -->
<div class="col-lg-5">

<h4 class="mb-4">Your Order</h4>

<div class="table-responsive">
<table class="table">
<thead>
<tr>
<th>Product</th>
<th>Qty</th>
<th>Total</th>
</tr>
</thead>
<tbody>

{% for item in items %}
<tr>
<td>
{{ item.product.name }} <br>
<small>₹{{ item.product.price }}</small>
</td>
<td>{{ item.quantity }}</td>
<td>₹{{ item.total }}</td>
</tr>
{% empty %}
<tr>
<td colspan="3" class="text-center">Your cart is empty</td>
</tr>
{% endfor %}

<tr>
<td colspan="2" class="text-end"><strong>Subtotal</strong></td>
<td><strong>₹{{ total }}</strong></td>
</tr>

<tr>
<td colspan="2" class="text-end"><strong>Total</strong></td>
<td><strong class="text-primary">₹{{ total }}</strong></td>
</tr>

</tbody>
</table>
</div>

<!-- ================= COUPON UI ================= -->
<div class="mb-4">
<label class="form-label">Have a coupon?</label>
<div class="input-group">
<input type="text" class="form-control" placeholder="Enter coupon code">
<button class="btn btn-outline-secondary" type="button">Apply</button>
</div>
</div>

<!-- ================= WALLET BALANCE ================= -->
{% if wallet %}
<div class="alert alert-info">
<strong>Wallet Balance:</strong> ₹{{ wallet.balance }}
</div>
{% endif %}

<!-- ================= PAYMENT METHODS ================= -->
<div class="border p-4 rounded">

<h5 class="mb-3">Payment Method</h5>

<div class="form-check mb-2">
<input class="form-check-input" type="radio" name="payment_method" value="Cash On Delivery" required>
<label class="form-check-label">Cash On Delivery</label>
</div>

<div class="form-check mb-2">
<input class="form-check-input" type="radio" name="payment_method" value="Bank Transfer">
<label class="form-check-label">Direct Bank Transfer</label>
</div>

<div class="form-check mb-2">
<input class="form-check-input" type="radio" name="payment_method" value="Paypal">
<label class="form-check-label">Paypal</label>
</div>

<div class="form-check mb-3">
<input class="form-check-input" type="radio" name="payment_method" value="Wallet">
<label class="form-check-label">Pay Using Wallet</label>
</div>

<button type="submit"
class="btn border-secondary py-3 px-4 text-uppercase w-100 text-primary">
Place Order
</button>

</div>

</div>

</div>

</form>

</div>
</div>

{% endblock %}